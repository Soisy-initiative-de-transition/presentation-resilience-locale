<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <title>La résilience locale : enjeux et avantages</title>

    <link
      href="https://fonts.googleapis.com/css2?family=Bad+Script&display=swap&family=Amatic+SC&display=swap&family=Roboto+Slab:wght@300;600"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="dist/reset.css" />
    <link rel="stylesheet" href="dist/reveal.css" />
    <link rel="stylesheet" href="dist/theme/white.css" id="theme" />

    <!-- Material design -->
    <!-- Compiled and minified CSS -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"
    />

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section id="mainTitle">
          <h1>La résilience locale</h1>
          <p>Enjeux et avantages</p>
        </section>
        <section
          data-markdown="slides/01-pourquoi-cette-presentation.md"
          data-separator="^\n\n\n"
          data-separator-vertical="^\n\n"
          data-separator-notes="^Note:"
        ></section>

        <section class="part-title">
          <div class="image"><img data-src="images/comprendre.png" /></div>
          <div class="title">
            <h1>Observer et constater</h1>
            <p>comprendre le présent pour prévoir l'avenir</p>
          </div>
        </section>

        <section
          style="font-size: 25px; margin-top: 5%"
          class="quote"
          data-markdown="slides/02-citation-dalai-lama.md"
          data-separator="^\n\n\n"
          data-separator-vertical="^\n\n"
          data-separator-notes="^Note:"
        ></section>

        <section
          data-markdown="slides/03-problemes.md"
          data-separator="^\n\n\n"
          data-separator-vertical="^\n\n"
          data-separator-notes="^Note:"
        ></section>

        <section>
          <section class="sub-part-title">
            <div class="title">
              <h1>Le pétrole</h1>
              <p>et le pic pétrolier</p>
            </div>
            <div class="image"><img data-src="images/pic-petrolier.png" /></div>
          </section>

          <section
            data-markdown="slides/04-petrole/01-petrole-energie-formidable.md"
            data-separator="^\n\n\n"
            data-separator-vertical="^\n\n"
            data-separator-notes="^Note:"
          ></section>

          <section
            data-markdown="slides/04-petrole/02-consommation-journaliere.md"
            data-separator="^\n\n\n"
            data-separator-vertical="^\n\n"
            data-separator-notes="^Note:"
          ></section>

          <section
            data-markdown="slides/04-petrole/03-evolution-consommation.md"
            data-separator="^\n\n\n"
            data-separator-vertical="^\n\n"
            data-separator-notes="^Note:"
          ></section>

          <section
            data-markdown="slides/04-petrole/04-jouons-ensemble.md"
            data-separator="^\n\n\n"
            data-separator-vertical="^\n\n"
            data-separator-notes="^Note:"
          ></section>

          <section
            data-markdown="slides/04-petrole/05-notre-vie-repose-sur-le-petrole.md"
            data-separator="^\n\n\n"
            data-separator-vertical="^\n\n"
            data-separator-notes="^Note:"
          ></section>

          <section
            data-markdown="slides/04-petrole/06-energie-en-cours-d-epuisement.md"
            data-separator="^\n\n\n"
            data-separator-vertical="^\n\n"
            data-separator-notes="^Note:"
          ></section>

          <section
            data-markdown="slides/04-petrole/07-1-TRE-USA-debut-20e-siecle.md"
            data-separator="^\n\n\n"
            data-separator-vertical="^\n\n"
            data-separator-notes="^Note:"
          ></section>

          <section
            data-markdown="slides/04-petrole/07-2-TRE-USA-1990.md"
            data-separator="^\n\n\n"
            data-separator-vertical="^\n\n"
            data-separator-notes="^Note:"
          ></section>

          <section
            data-markdown="slides/04-petrole/07-3-TRE-USA-2015.md"
            data-separator="^\n\n\n"
            data-separator-vertical="^\n\n"
            data-separator-notes="^Note:"
          ></section>

          <section
            data-markdown="slides/04-petrole/07-4-TRE-monde.md"
            data-separator="^\n\n\n"
            data-separator-vertical="^\n\n"
            data-separator-notes="^Note:"
          ></section>

          <section
            style="font-size: 17px"
            data-markdown="slides/04-petrole/08-pays-pic-petrolier.md"
            data-separator="^---$"
            data-separator-vertical="^\n\n"
            data-separator-notes="^Note:"
          ></section>

          <section
            class="quote"
            style="font-size: 45px"
            data-markdown="slides/04-petrole/09-citation-jean-laherrere.md"
            data-separator="^\n\n\n"
            data-separator-vertical="^\n\n"
            data-separator-notes="^Note:"
          ></section>

          <section
            data-markdown="slides/04-petrole/10-rapport-meadows.md"
            data-separator="^\n\n\n"
            data-separator-vertical="^\n\n"
            data-separator-notes="^Note:"
          ></section>

          <section
            data-markdown="slides/04-petrole/11-quelles-alternatives.md"
            data-separator="^\n\n\n"
            data-separator-vertical="^\n\n"
            data-separator-notes="^Note:"
          ></section>

          <section
            data-markdown="slides/04-petrole/12-le-petrole-mais-pas-que.md"
            data-separator="^\n\n\n"
            data-separator-vertical="^\n\n"
            data-separator-notes="^Note:"
          ></section>
        </section>

        <section>
          <section class="sub-part-title">
            <div class="title">
              <h1>Impacts en cours</h1>
              <p>liés à la pollution des sols et de l'atmosphère</p>
            </div>
            <div class="image">
              <img data-src="images/impact-environnement.png" />
            </div>
          </section>

          <section
            data-markdown="slides/05-impact-en-cours/01-la-course-au-petrole.md"
            data-separator="^\n\n\n"
            data-separator-vertical="^\n\n"
            data-separator-notes="^Note:"
          ></section>

          <section
            data-markdown="slides/05-impact-en-cours/02-biosphere-degradee.md"
            data-separator="^\n\n\n"
            data-separator-vertical="^\n\n"
            data-separator-notes="^Note:"
          ></section>

          <section
            data-markdown="slides/05-impact-en-cours/03-canicules.md"
            data-separator="^\n\n\n"
            data-separator-vertical="^\n\n"
            data-separator-notes="^Note:"
          ></section>

          <section
            data-markdown="slides/05-impact-en-cours/04-eau-enjeux.md"
            data-separator="^\n\n\n"
            data-separator-vertical="^\n\n"
            data-separator-notes="^Note:"
          ></section>

          <section
            data-markdown="slides/05-impact-en-cours/05-santé.md"
            data-separator="^\n\n\n"
            data-separator-vertical="^\n\n"
            data-separator-notes="^Note:"
          ></section>

          <section
            data-markdown="slides/05-impact-en-cours/06-difficultes-internationales.md"
            data-separator="^\n\n\n"
            data-separator-vertical="^\n\n"
            data-separator-notes="^Note:"
          ></section>

          <section
            class="quote"
            style="font-size: 45px"
            data-markdown="slides/05-impact-en-cours/07-exemple-covid-19.md"
            data-separator="^\n\n\n"
            data-separator-vertical="^\n\n"
            data-separator-notes="^Note:"
          ></section>
        </section>

        <section>
          <section class="sub-part-title">
            <div class="title">
              <h1>Impacts à venir</h1>
              <p>liés à la pollution des sols et de l'atmosphère</p>
            </div>
            <div class="image">
              <img data-src="images/impacts-a-venir.png" />
            </div>
          </section>

          <section
            data-markdown="slides/06-impacts-a-venir/01-transports.md"
            data-separator="^\n\n\n"
            data-separator-vertical="^\n\n"
            data-separator-notes="^Note:"
          ></section>

          <section
            data-markdown="slides/06-impacts-a-venir/02-alimentation.md"
            data-separator="^\n\n\n"
            data-separator-vertical="^\n\n"
            data-separator-notes="^Note:"
          ></section>

          <section
            data-markdown="slides/06-impacts-a-venir/03-climat.md"
            data-separator="^\n\n\n"
            data-separator-vertical="^\n\n"
            data-separator-notes="^Note:"
          ></section>

          <section
            data-markdown="slides/06-impacts-a-venir/04-canicules.md"
            data-separator="^\n\n\n"
            data-separator-vertical="^\n\n"
            data-separator-notes="^Note:"
          ></section>

          <section
            style="margin-top: 15%"
            class="quote"
            data-markdown="slides/06-impacts-a-venir/05-citation-klaus-klepfer.md"
            data-separator="^\n\n\n"
            data-separator-vertical="^\n\n"
            data-separator-notes="^Note:"
          ></section>
        </section>

        <section class="part-title">
          <div class="image">
            <img style="max-height: 250px" data-src="images/reflechir.png" />
          </div>
          <div class="title">
            <h1>Réfléchir</h1>
            <p>utiliser l'intelligence commune au service de tous</p>
          </div>
        </section>

        <section
          data-markdown="slides/07-besoins-primordiaux.md"
          data-separator="^\n\n\n"
          data-separator-vertical="^\n\n"
          data-separator-notes="^Note:"
        ></section>

        <section
          data-markdown="slides/08-alimentation.md"
          data-separator="^\n\n\n"
          data-separator-vertical="^\n\n"
          data-separator-notes="^Note:"
        ></section>

        <section
          data-markdown="slides/09-eau-sujet-delicat.md"
          data-separator="^\n\n\n"
          data-separator-vertical="^\n\n"
          data-separator-notes="^Note:"
        ></section>

        <section
          data-markdown="slides/10-consommation-eau.md"
          data-separator="^\n\n\n"
          data-separator-vertical="^\n\n"
          data-separator-notes="^Note:"
        ></section>

        <section
          data-markdown="slides/11-contrat-social.md"
          data-separator="^\n\n\n"
          data-separator-vertical="^\n\n"
          data-separator-notes="^Note:"
        ></section>

        <section
          data-markdown="slides/12-reflechir-a-nos-actions.md"
          data-separator="^\n\n\n"
          data-separator-vertical="^\n\n"
          data-separator-notes="^Note:"
        ></section>

        <section>
          <section class="sub-part-title">
            <div class="title">
              <h1>La résilience locale</h1>
              <p>que des avantages</p>
            </div>
            <div class="image">
              <img data-src="images/resilience-locale.png" />
            </div>
          </section>

          <section
            data-markdown="slides/13-resilience-locale/01-la-resilience-c-est-quoi.md"
            data-separator="^\n\n\n"
            data-separator-vertical="^\n\n"
            data-separator-notes="^Note:"
          ></section>

          <section
            data-markdown="slides/13-resilience-locale/02-oui-mais-comment.md"
            data-separator="^\n\n\n"
            data-separator-vertical="^\n\n"
            data-separator-notes="^Note:"
          ></section>

          <section
            data-markdown="slides/13-resilience-locale/03-que-peut-on-faire.md"
            data-separator="^\n\n\n"
            data-separator-vertical="^\n\n"
            data-separator-notes="^Note:"
          ></section>

          <section
            data-markdown="slides/13-resilience-locale/04-diversite.md"
            data-separator="^\n\n\n"
            data-separator-vertical="^\n\n"
            data-separator-notes="^Note:"
          ></section>
        </section>

        <section>
          <section class="sub-part-title">
            <div class="title">
              <h1>La permaculture</h1>
              <p>à la rescousse</p>
            </div>
            <div class="image">
              <img data-src="images/permaculture.png" />
            </div>
          </section>

          <section
            data-markdown="slides/14-la-permaculture/01-la-permaculture-c-est-quoi.md"
            data-separator="^\n\n\n"
            data-separator-vertical="^\n\n"
            data-separator-notes="^Note:"
          ></section>
        </section>

        <section>
          <section class="sub-part-title">
            <div class="title">
              <h1>Repenser notre bonheur</h1>
              <p>moins vite, moins loin, mieux</p>
            </div>
            <div class="image">
              <img data-src="images/bonheur.png" />
            </div>
          </section>
        </section>

        <section>
          <section class="sub-part-title">
            <div class="title">
              <h1>Quelques Exemples</h1>
              <p>inspirons-nous de Totnes, Detroit, Cuba…</p>
            </div>
            <div class="image">
              <img data-src="images/inspirations.png" />
            </div>
          </section>
        </section>

        <section class="part-title">
          <div class="image">
            <img style="max-height: 250px" data-src="images/agir.png" />
          </div>
          <div class="title">
            <h1>Agir</h1>
            <p>rassembler, informer, penser et concrétiser les projets</p>
          </div>
        </section>
      </div>
    </div>

    <script src="dist/reveal.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/markdown/markdown.js"></script>

    <script>
      // More info about initialization & config:
      // - https://revealjs.com/initialization/
      // - https://revealjs.com/config/
      Reveal.initialize({
        hash: true,
        slideNumber: true,
        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [RevealMarkdown, RevealNotes],
      });
    </script>

    <!-- Issue creator -->
    <button
      id="suggestion-button"
      class="js-modal button js-modal-toggler"
      aria-haspopup="dialog"
      title="Proposer une modification"
    >
      <span>Proposer une modification</span>
    </button>

    <span
      id="js-modal-overlay"
      class="simple-modal-overlay js-modal-toggler"
      title="Fermer cette fenêtre"
      hidden
    >
      <span hidden>Fermer cette fenêtre</span>
    </span>

    <dialog
      id="js-modal"
      class="simple-modal"
      role="dialog"
      aria-labelledby="modal-title"
      hidden
    >
      <form id="suggestion-form" class="simple-modal__content card">
        <div role="document" class="simple-modal__wrapper card-content row">
          <h1 id="modal-title" class="simple-modal-title card-title">
            Proposer une modification
          </h1>

          <div class="input-field col s6">
            <input id="name-field" type="text" required />
            <label for="name-field">Votre nom</label>
          </div>
          <div class="input-field col s6">
            <input id="email-field" type="email" />
            <label for="email-field">Votre e-mail</label>
          </div>
          <div class="input-field col s12">
            <textarea
              id="comment-field"
              name="comment"
              class="materialize-textarea"
              required
            ></textarea>
            <label for="comment-field"
              >Dites-nous ce que vous aimeriez changer dans cette page</label
            >
          </div>
        </div>
        <div class="card-action">
          <button class="waves-effect waves-light btn disabled" type="submit">
            Envoyer ma suggestion
          </button>
          <button
            type="button"
            class="js-modal-close js-modal-toggler waves-effect waves-teal btn-flat"
            id="js-modal-close"
            title="Fermer cette fenêtre"
            data-content-back-id=""
          >
            En fait non !
          </button>
        </div>
      </form>
    </dialog>

    <script type="module">
      import { Octokit } from 'https://cdn.skypack.dev/@octokit/core';
      const owner = 'Soisy-initiative-de-transition';
      const repo = 'presentation-resilience-locale';
      const octokit = new Octokit({
        auth: 'ed1a7743898618bb83cbc983fade885cebbbe170',
      });

      const modal = document.getElementById('js-modal');
      const overlay = document.getElementById('js-modal-overlay');
      const submitButton = document.querySelector('#suggestion-form button');
      const nameField = document.getElementById('name-field');
      const emailField = document.getElementById('email-field');
      const textArea = document.getElementById('comment-field');

      // Listen to text change to enable form validation
      textArea.addEventListener('input', handleInputChange);
      nameField.addEventListener('input', handleInputChange);

      async function createIssue(title, body) {
        const response = await octokit.request(
          'POST /repos/{owner}/{repo}/issues',
          { owner, repo, title, body }
        );
        // if (response.url) {
        //   console.log('URL du ticket créé', url);
        // } else {
        //   console.log('hum… fail ?', response);
        // }
      }

      function handleInputChange(event) {
        const valid =
          textArea.value.trim().length > 0 && nameField.value.trim().length > 0;
        if (submitButton.classList.contains('disabled') && valid) {
          submitButton.classList.remove('disabled');
        } else if (!submitButton.classList.contains('disabled') && !valid) {
          submitButton.classList.add('disabled');
        }
      }

      function handleSuggestion() {
        submitButton.addEventListener('click', function (event) {
          event.preventDefault();
          const text = textArea.value.trim();
          const name = nameField.value.trim();
          const email = emailField.value.trim();
          if (text) {
            const title = Reveal.getCurrentSlide().querySelector('h1')
              .textContent;
            createIssue(
              `Slide ${title} | suggestion de ${name} (${
                email || 'aucun email transmis'
              })`,
              text
            );
            overlay.toggleAttribute('hidden');
            modal.toggleAttribute('hidden');
            textArea.value = '';
            nameField.value = '';
            emailField.value = '';
          }
        });
      }

      function toggleDialog() {
        const togglers = document.querySelectorAll('.js-modal-toggler');
        for (const toggler of togglers) {
          toggler.addEventListener('click', function () {
            overlay.toggleAttribute('hidden');
            modal.toggleAttribute('hidden');
          });
        }
      }

      toggleDialog();
      handleSuggestion();
    </script>
  </body>
</html>
